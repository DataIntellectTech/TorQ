action,ms,bytes,lang,code,repeat,minver,comment
beforeany,0,0,q,system "sleep 5",1,,"wait for all procs to go up"
before,0,0,q,hdbHandle:hopen`::41804:admin:admin,1,,"Get handle to the HDB"
before,0,0,q,rdb1Handle:hopen`::41802:admin:admin,1,,"Get handle to RDB1"
before,0,0,q,rdb2Handle:hopen`::41803:admin:admin,1,,"Get handle to RDB2"
before,0,0,q,wdbHandle:hopen`::41805:admin:admin,1,,"Get handle to WDB"
before,0,0,q,gwHandle:hopen`::41806:admin:admin,1,,"Get handle to gateway"
true,0,0,q,2~count hdbHandle(value;`.hdb.reloadcalls),1,,"check number of connections to the HDB"
true,0,0,q,1~count rdb1Handle(value;`.rdb.reloadcalls),1,,"check number of connections to RDB1"
true,0,0,q,1~count rdb2Handle(value;`.rdb.reloadcalls),1,,"check number of connections to RDB12"
true,0,0,q,1~count gwHandle(value;`.gwreload.reloadcalls),1,,"check number of connections to the gateway"
run,0,0,q,kill9proc["rdb1"],1,,"shut down rdb1 process"
run,0,0,q,system "sleep 5",1,,"to ensure rdb1 shuts down"
true,0,0,q,2~count hdbHandle(value;`.hdb.reloadcalls),1,,"recheck number of connections to the HDB"
true,0,0,q,1~count rdb2Handle(value;`.rdb.reloadcalls),1,,"recheck number of connections to RDB2"
run,0,0,q,kill9proc["rdb2"],1,,"shut down rdb2 process"
run,0,0,q,system "sleep 5",1,,"to ensure rdb2 shuts down"
true,0,0,q,1~count hdbHandle(value;`.hdb.reloadcalls),1,,"recheck number of connections to the HDB"
