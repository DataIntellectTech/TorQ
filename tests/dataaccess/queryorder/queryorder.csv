action,ms,bytes,lang,code,repeat,minver,comment
beforeany,0,0,q,system "sleep 1",1,,"Wait for all procs to go up"
before,0,0,q,\l hdb,1,,"load the HDB"
before,0,0,q,.servers.startup[],1,,"Get connection management set up"
before,0,0,q,.dataaccess.init[.dataaccess.tablepropertiespath],1,,"Run the init function"
true,0,0,q,testfunction[`basicsymquery],1,,"Basic sym check"
true,0,0,q,testfunction[`byandffby],1,,"Checks if the by part of the query is reordered if both a free form argument and grouping are provided"
true,0,0,q,testfunction[`reorderby],1,,"As above however checks the order is preserved even after being swapped"
true,0,0,q,testfunction[`reorderwhere],1,,"Checks if the where part of the query is reordered to prioritise the sym filter"
true,0,0,q,testfunction[`reorderwhere1],1,,"Checks if the where part of the query is reordered"
true,0,0,q,testfunction[`colsandffcols],1,,"Checks if the cols and freeformcols order is preserved"
true,0,0,q,testfunction[`colsandffcols1],1,,"In this case the arguments for cols and ffcols are reversed test this order is preserved"
true,0,0,q,testfunction[`listrename],1,,"check the list rename parameter is valid"
true,0,0,q,testfunction[`dictionaryrename],1,,"check the dictionary rename parameter is valid"
fail,0,0,q,.queryorder.orderquery getinputparams[`partederror],1,,"Checks when the above query is sent to a hdb it errors because of a parted error"
true,0,0,q,testfunction[`hdbwherereorder],1,,"checks the filter prioritises the partition"
run,0,0,q,clearattrcol[`:.;`quote;`time],1,,"Clear any attribute on the hdb time column"
true,0,0,q,testfunction[`unsortedhdb],1,,"Checks the time filter is not prioritised when there is no attribute"
run,0,0,q,setattrcol[`:.;`quote;`time;`s],1,,"Applies the s attribute to the hdb time column"
true,0,0,q,testfunction[`timesortedhdb],1,,"Checks the time filter is prioritised"
true,0,0,q,((first .queryorder.orderquery getinputparams[`multiinstrumentquery])[1+til 4])~getoutputparams[`multiinstrumentquery0],1,,"Checks a multi instrument query is split up and the first part is correct"
true,0,0,q,((last .queryorder.orderquery getinputparams[`multiinstrumentquery])[1+til 4])~getoutputparams[`multiinstrumentquery1],1,,"Checks a multi instrument query is split up and the second part is correct"
true,0,0,q,"testfunction1[`getdatabyclause;""select mprice:max askprice by sym,asksize from xdaily where sym in `AUSUSD`EURUSD`GBPUSD,bidprice>20,askprice>2""]",1,,"Check if the lambda functions returns what is expected"
true,0,0,q,"testfunction1[`getdatabyclause1;""select mprice:max askprice by sym,asksize from xdaily where sym in `AUSUSD`EURUSD`GBPUSD,bidprice>20,askprice>2""]",1,,"Check if the lambda functions returns what is expected"
