action,ms,bytes,lang,code,repeat,minver,comment
before,0,0,q,.servers.startup[],1,,"Get connection management set up"
before,0,0,q,system"sleep 1",1,,"Wait a sec"
before,0,0,q,rdbHandles:rdbNames!gethandle each rdbNames:exec procname from(.proc`readprocs).proc`file where proctype=`rdb,1,,"Open handle to RDBs"
before,0,0,q,hdbHandles:hdbNames!gethandle each hdbNames:exec procname from(.proc`readprocs).proc`file where proctype=`hdb,1,,"Open handle to HDBs"
before,0,0,q,stpHandle:gethandle[`stp1],1,,"Open handle to STP"
before,0,0,q,gwHandle:gethandle[`gateway1],1,,"Open handle to GW"
run,0,0,q,hdbHandles@\:".dataaccess.init[.dataaccess.tablepropertiespath]",1,,"Enable remote dataaccess via generic getdata function"
run,0,0,q,row:1000,1,,"Rows to publish"
run,0,0,q,"stpHandle@/:`.u.upd,/:((`trade;trade:t[syms;row]);(`quote;quote:q[syms;row]);(`heartbeat;`error))",1,,"Publish normal syms table updates"
run,0,0,q,system"sleep 1",1,,"Wait for update to publish"
run,0,0,q,"stpHandle@/:`.u.upd,/:((`trade;trade:t[rsyms;row]);(`quote;quote:q[rsyms;row]);(`heartbeat;`error))",1,,"Publish random syms table updates"
run,0,0,q,system"sleep 1",1,,"Wait for update to publish"
true,0,0,q,"all checker[gwHandle;rdbHandles;hdbHandles;;0b]'[get each k where (k:key`.)like""query[0-9]*""]",1,,"Run all query checks on RDBs and/or HDBs against dataaccess API"
true,0,0,q,"all checker[gwHandle;rdbHandles;hdbHandles;;1b]'[get each k where (k:key`.)like""query[0-9]*""]",1,,"Run all availability checks on RDBs and/or HDBs against dataaccess API"
true,0,0,q,"all error[gwHandle;rdbHandles]'[get each k where (k:key`.)like""error[0-9]*""]",1,,"Error handling checks"