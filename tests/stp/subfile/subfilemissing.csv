action,ms,bytes,lang,code,repeat,minver,comment
before,0,0,q,"system ""l "",getenv[`KDBAPPCONFIG],""/settings/rdb.q""",1,,"Load RDB config"
true,0,0,q,.rdb.subfiltered,1,,"Check that filtering is on, otherwise this test won't work"
true,0,0,q,any a:"q" in' b:@[system;"pgrep -lf rdb1";`down],1,,"Make sure RDB is up"
run,0,0,q,"system ""kill -9 "",first "" "" vs first b where a",1,,"Kill it"
true,0,0,q,not any "q" in' @[system;"pgrep -lf rdb1";`down],1,,"Make sure it is down"
run,0,0,q,"system ""mv "",getenv[`KDBAPPCONFIG],""/rdbsub.csv "",getenv[`TORQHOME]",1,,"Move sub file to TorQ home"
run,0,0,q,"system getenv[`TORQHOME],""/torq.sh start rdb1 > /dev/null && sleep 1""",1,,"Try to start RDB again"
true,0,0,q,not any "q" in' @[system;"pgrep -lf rdb1";`down],1,,"Make sure it is still down"
run,0,0,q,"system ""mv "",getenv[`TORQHOME],""/rdbsub.csv "",getenv[`KDBAPPCONFIG]",1,,"Move sub file back to appconfig"